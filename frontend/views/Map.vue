<template>
  <div class="button"></div>
  <!-- Balise vide pour insÃ©rer la map -->
  <div class="mapContainer">
    <div class="map" id="map">
      <button
        v-if="currentMapType !== 'generalZone'"
        class="SwitchButton pointer"
        @click="goBack">
        Retour
      </button>
    </div>
  </div>
  <!-- Ce qui permet de faire apparaitre le nom du lieu en hover -->
  <div class="hoverName" id="hoverName"></div>
</template>

<script setup>
import { onMounted, onActivated, onBeforeUnmount } from "vue";
import "ol/ol.css";
import Map from "ol/Map.js";
import View from "ol/View.js";
import ImageLayer from "ol/layer/Image.js";
import ImageStatic from "ol/source/ImageStatic.js";
import Feature from "ol/Feature.js";
import Polygon from "ol/geom/Polygon.js";
import { Style, Fill, Stroke } from "ol/style.js";
import { addProjection } from "ol/proj.js";
import Projection from "ol/proj/Projection.js";
import VectorSource from "ol/source/Vector.js";
import VectorLayer from "ol/layer/Vector.js";
import router from "@/router";
import { defaults as defaultInteractions } from "ol/interaction.js";
import { ref } from "vue";
import { useUserStore } from "@/stores/user";
import { useRoute } from "vue-router";
import { usePrestataireStore } from "@/services/prestataire.service";


const route = useRoute();
const prestataireStore = usePrestataireStore();

let map;
const currentMapType = ref("generalZone");
const currentMapCote = ref(null);
let coucheVecteur = null;
let hoverStyle = null;
let defaultStyle = null;
let providerStyle = null;
let providerHoverStyle = null;
let generalStyle = null;
let generalHoverStyle = null;
let restorationStyle = null;
let restorationHoverStyle = null;
let animationlStyle = null;
let animationlHoverStyle = null;
let standStyle;
let standHoverStyle;
let lastFeature = null;
let label = null;

const nom_prestataire = ref("");
const prestataires = ref([]);

const userStore = useUserStore();

const tailleMap = [0, 0, 2000, 1600];
const projection = new Projection({
  code: "MintonetteMap",
  units: "pixels",
  extent: tailleMap,
});

const generalMap = [
  {
    type: "generalZone",
    name: "Zone prestataire",
    image: "/MapPrestaGauche.png",
    cote: "gauche",
    coord: [
      [256.5421622483284, 1278.040658407219],
      [634.6179540408842, 1278.040658407219],
      [665.8638850304675, 1278.040658407219],
      [665.8638552320258, 1267.4916656691769],
      [675.237640488589, 1268.2730896508206],
      [674.8470723109076, 1292.4966741765793],
      [752.1807634295033, 1293.2780832540843],
      [783.4266944190865, 1293.2780832540843],
      [787.3324357927845, 1206.9327006287458],
      [761.945116863748, 1204.1977912136854],
      [759.992246176899, 1213.183958344648],
      [722.4971051506456, 1212.7932463538264],
      [721.3254006176012, 1186.2254420476215],
      [678.7528136846056, 1186.2254420476215],
      [679.5339500399684, 1170.597320114073],
      [676.7999429977567, 1163.9553653114872],
      [674.0659359555449, 1156.141304344713],
      [668.9884602503607, 1148.7179553687606],
      [684.6114257451525, 1147.9365164829783],
      [699.8438230622628, 1133.4805305218954],
      [684.2208575674711, 1107.6941352931956],
      [675.6282086662704, 1113.5546810182764],
      [656.0995017977809, 1090.8938922913203],
      [626.8064414950466, 1089.7218010312702],
      [612.8525321077559, 1088.5607702828133],
      [615.332532754301, 997.3910083498562],
      [611.6125081334445, 566.3503077120948],
      [616.536801052085, 583.4948032882552],
      [622.0048449349504, 590.1367431867025],
      [628.6445933508602, 590.1367431867025],
      [638.408946785105, 585.8390156166321],
      [645.439293177138, 579.1970459099077],
      [652.8601779484104, 570.6015907697669],
      [661.8433950272924, 578.4156517365411],
      [678.247496877447, 554.1920746628516],
      [683.3249725826308, 540.1267559801748],
      [717.3049404128677, 495.19590542122285],
      [728.6315963562802, 488.94464770532034],
      [782.5308094342463, 488.55395061863703],
      [783.3119755880509, 441.66958481799145],
      [730.584467043129, 440.88814593220934],
      [699.1903608359455, 440.5610128880818],
      [693.3317487753986, 436.26328531801136],
      [682.0051226304282, 435.4818464322292],
      [677.3182151029256, 440.95172487890363],
      [243.39033954555407, 444.8587404581517],
      [242.99977136787265, 488.226787766232],
      [257.84158560808055, 489.0081968437371],
      [256.07305680049086, 686.0882844613039],
      [202.95498007788757, 686.8696786346705],
      [204.12671440937368, 876.800710816926],
      [214.2816360212999, 880.3170367615605],
      [217.0156579627326, 893.9916434534155],
      [244.16018186492585, 892.4311207521405],
      [250.01879392547272, 878.3658020694637],
      [264.07945691109677, 877.1937108094137],
      [257.0491403175057, 896.7288632263494],
      [255.8774059860196, 970.9624424107049],
      [256.5421622483284, 1278.040658407219],
    ],
  },
  {
    type: "generalZone",
    name: "Gymnase",
    image: "/mapTerrain.png",
    coord: [
      [1007.8458944344685, 1189.9510785216112],
      [1045.6013852492276, 1187.3459853715067],
      [1079.8850893256117, 1180.833222683206],
      [1118.0745944555263, 1167.8077122131244],
      [1154.5282211154745, 1151.7429114947347],
      [1178.3966543720605, 1136.5464751597133],
      [1200.5291197633521, 1119.1790980532323],
      [1219.6238723283095, 1102.6801300496777],
      [1231.7750514165164, 1087.0495115229721],
      [1244.360215021436, 1070.9847108045824],
      [1253.0396371697102, 1060.564278578086],
      [1278.2099643795498, 1088.7862402897085],
      [1294.2669147228444, 1065.7744946913344],
      [1305.550154576068, 1047.1045859163205],
      [1315.5315004760382, 1027.1321305662545],
      [1323.3430131877717, 1011.9356942312329],
      [1336.7960862292318, 980.2402824393973],
      [1342.8716906725567, 962.4387380477517],
      [1348.0793260824557, 948.1106660960984],
      [1351.9850675391012, 926.8356492644605],
      [1355.4568840759189, 907.2973761060784],
      [1358.060671982426, 880.8121431611924],
      [1358.928611217409, 860.405535432481],
      [1360.6645194858177, 824.3682570042458],
      [1361.5324587208008, 804.8299838458637],
      [1360.2305349691048, 783.1207848225417],
      [1356.3248233109018, 755.3330202091228],
      [1352.4190520558138, 734.4921706626495],
      [1347.044339877992, 708.9670689603553],
      [1339.2328569647009, 686.8237026518686],
      [1330.9874193331395, 664.2461094321395],
      [1324.0438458563892, 645.5762304701645],
      [1315.7984380232701, 626.4721395034666],
      [1298.9565471501878, 600.0793524404934],
      [1288.9752012502174, 581.4094436654796],
      [1274.220204457061, 558.3976682540663],
      [1246.4460297438295, 587.4880241620959],
      [1231.6909733537889, 569.6864946769695],
      [1212.1622958690039, 551.4507680936397],
      [1197.4072692774048, 538.4252576235582],
      [1174.4067752558021, 522.3604569051683],
      [1154.444113254304, 511.07166029530384],
      [1125.3312513029432, 498.3625873687217],
      [1100.1609240931036, 490.98147520357236],
      [1079.33029305818, 482.7319390289772],
      [1045.4805437000664, 478.39011711213607],
      [1011.6307645435106, 474.9166595786635],
      [981.2528019237722, 476.21920615371585],
      [938.7236006189416, 482.2977866503322],
      [900.9680800057399, 493.15238616199326],
      [862.7786344727105, 507.91462539881127],
      [836.3063537127324, 526.1503519821409],
      [815.4757524762514, 542.6493199856955],
      [785.5317147763407, 571.7396311741667],
      [768.6068251980626, 595.1855738707446],
      [742.339645578491, 560.0405506035639],
      [701.1123680253564, 625.6023298652142],
      [686.2715957847054, 651.304926451062],
      [675.422310649752, 678.2243415876321],
      [666.3089337832075, 709.0513964493593],
      [659.3654199033422, 738.1417225443502],
      [655.4596486482541, 763.7585687460888],
      [651.1199226748956, 796.7565420194962],
      [658.9314651850718, 797.6248989496044],
      [655.893633164967, 816.7289899163023],
      [653.7237701782879, 836.2672630746845],
      [655.0256939299838, 859.2790086730588],
      [656.3275878832374, 880.5540105981772],
      [661.5352530915791, 910.0785039783327],
      [665.4409945482246, 929.6167771367147],
      [670.2146752398532, 950.4576117766686],
      [677.1582189181611, 974.7718890435758],
      [684.9697316298947, 996.0469058752137],
      [695.8189869664054, 1018.1902721837005],
      [709.7060743230211, 1041.6362148802787],
      [720.9893439746874, 1060.7403058469765],
      [730.970660076215, 1074.6341807004264],
      [740.5180214594724, 1088.9622526520798],
      [762.2165917293793, 1067.2530536287577],
      [783.4812072810156, 1092.0015279938686],
      [807.3496405376015, 1118.9209282239194],
      [825.5764240691332, 1134.1173645589408],
      [847.27499433904, 1149.3138008939625],
      [878.5209259922042, 1164.0760550372997],
      [902.8233437655031, 1174.4964574507574],
      [928.4275958951703, 1182.7459638123137],
      [952.7300136684692, 1186.6536035374706],
      [973.1266899851223, 1190.5612730756666],
      [991.7874282349244, 1191.4296374590347],
      [1007.8458944344685, 1189.9510785216112],
    ],
  },
  {
    type: "generalZone",
    name: "Zone prestataire",
    image: "/MapPrestaDroite.png",
    cote: "droite",
    coord: [
      [1238.103908122107, 1270.373182633889],
      [1269.3498248760498, 1270.373182633889],
      [1268.4819005402878, 1291.648199465527],
      [1355.2761518214727, 1291.648199465527],
      [1354.8421673047599, 1272.5441010455693],
      [1741.0766167943964, 1274.2808447188252],
      [1743.2464797810753, 877.4367805581038],
      [1792.7192843610985, 876.134219076532],
      [1795.1547103867222, 685.1952417489206],
      [1743.0781476986342, 685.1952417489206],
      [1744.8932161421976, 434.5650183298866],
      [1500.1334132260044, 440.2094166348189],
      [1502.737230930954, 447.1563615148035],
      [1474.9630711169436, 448.45887827681696],
      [1474.9630711169436, 441.0777810181871],
      [1364.7343785454964, 441.5119632098712],
      [1364.7343785454964, 452.80071510017746],
      [1358.2248119342908, 461.9186007516215],
      [1349.545382336406, 467.99715143519904],
      [1335.2826681430063, 464.22883905991705],
      [1327.4711852297153, 454.2426337446631],
      [1331.3769266863608, 445.9931422896262],
      [1334.414728908023, 439.4803796013257],
      [1279.300363998273, 437.7436508345893],
      [1225.48793773944, 437.7436508345893],
      [1226.3558769744232, 489.4115254297508],
      [1270.6209418499989, 491.58243638817135],
      [1289.7156795157348, 491.14825419648724],
      [1300.1309950331965, 503.3054002832006],
      [1322.6975045380866, 535.8691988181836],
      [1333.9807443913103, 558.0125651266703],
      [1342.6601665395847, 570.6039008583275],
      [1349.6037102178925, 576.248314069779],
      [1363.924782091221, 561.0518479217186],
      [1388.22719986452, 560.1835133513893],
      [1389.529064019331, 691.307034608391],
      [1386.925276112824, 872.4219248659451],
      [1386.9475710462184, 1098.509025488695],
      [1359.1733665345444, 1096.7722818154389],
      [1343.116445989692, 1115.8763876886565],
      [1330.531282384772, 1098.509025488695],
      [1306.2288646114735, 1130.6386418319937],
      [1318.3800734981228, 1144.9666988771278],
      [1281.926476636617, 1202.7131465156458],
      [1238.9633206135163, 1204.0156930906983],
      [1238.103908122107, 1270.373182633889],
    ],
  },
];
//Terrains & Gradins #############################################################################################################################################
const landLocations = [
  {
    type: "court",
    name: "Terrain 1",
    terrainId: 1,
    coord: [
      [455.745856348253, 1038.1583883478115],
      [959.6213272781175, 1033.5671124347055],
      [959.6213272781175, 750.7444310677058],
      [445.6500293231669, 750.7444310677058],
      [455.745856348253, 1038.1583883478115],
    ],
  },
  {
    type: "court",
    name: "Terrain 2",
    terrainId: 2,
    coord: [
      [1046.4892222541098, 1033.455234377288],
      [1541.939359896889, 1035.0028339136063],
      [1546.9790180838925, 746.5940882681813],
      [1046.0385307347303, 749.6193089514461],
      [1046.4892222541098, 1033.455234377288],
    ],
  },
  {
    type: "court",
    name: "Terrain 3",
    terrainId: 3,
    coord: [
      [442.9922551816334, 678.0303751011293],
      [956.9116595064504, 676.5464815124001],
      [952.4392899636493, 362.85829611592555],
      [419.6145950892194, 359.34341817136],
      [442.9922551816334, 678.0303751011293],
    ],
  },
  {
    type: "court",
    name: "Terrain 4",
    terrainId: 4,
    coord: [
      [1044.26509630362, 677.7501285267031],
      [1551.1435166341125, 676.0133699469278],
      [1565.0306635876132, 361.66427064607853],
      [1048.6048222769782, 362.5326052164078],
      [1044.26509630362, 677.7501285267031],
    ],
  },
  // Gradin ##############################################################################################################################################################################################################################
  {
    type: "stand",
    name: "Tribune Nord",
    url: userStore.isConnected
      ? "/Gradins/Gradin/nord"
      : "/utilisateur/connexion",
    coord: [
      [249.35839950326178, 1486.0319221298562],
      [331.91885069417697, 1341.9196650761246],
      [352.99812830115144, 1347.1921035393032],
      [448.73313176569235, 1126.6301072320289],
      [973.079962468043, 1125.7513172066579],
      [972.2016328495517, 1143.3259712956979],
      [1036.317704826564, 1142.4473019459458],
      [1036.317704826564, 1122.2364286253166],
      [1530.8022029701006, 1123.9939181693444],
      [1629.1722254442493, 1337.5260166383168],
      [1644.103225875919, 1339.2835061823448],
      [1646.7383353479293, 1362.1305685656585],
      [1658.1561379221703, 1353.3432415211385],
      [1728.4203363038168, 1477.2445950853362],
      [1676.6004568278047, 1486.0319221298562],
      [1627.4155662072667, 1490.425585652116],
      [1569.4475000183522, 1493.9405044023622],
      [1502.6964994941345, 1498.3341679246223],
      [1450.8766200181226, 1498.3341679246223],
      [1404.3265976365221, 1498.3341679246223],
      [1344.6019928271614, 1500.9703796139852],
      [1293.6604429696408, 1501.849116843773],
      [1059.153611516387, 1506.242780366033],
      [965.1751768264262, 1504.4853134486837],
      [846.6042968261966, 1507.1215025113684],
      [726.2768178972524, 1505.3640431362453],
      [626.1503171109255, 1503.6065837611222],
      [533.9285115038132, 1503.6065837611222],
      [391.6434555035375, 1500.0916499264238],
      [316.10940002747964, 1494.8192491743762],
      [249.35839950326178, 1486.0319221298562],
    ],
  },
  {
    type: "stand",
    name: "Tribune Est",
    url: userStore.isConnected
      ? "/Gradins/Gradin/est"
      : "/utilisateur/connexion",
    coord: [
      [1699.2872443846295, 1060.8454726559387],
      [1725.3432849977123, 639.4000844547812],
      [1727.0803464202513, 606.3796239865314],
      [1722.7376630451545, 579.4419087723227],
      [1713.1838550399389, 562.9316524340115],
      [1697.5502425995892, 542.9456013315308],
      [1683.6536319442798, 520.3526519475507],
      [1664.5458966588517, 502.9734692932139],
      [1666.2830177188894, 477.7736514610899],
      [1742.7139588606015, 421.29129291781743],
      [1749.6622045507575, 433.456708842511],
      [1752.2678861408135, 448.22902304870394],
      [1750.5307650807763, 466.47716185242206],
      [1771.3756214262417, 460.39446880675314],
      [1792.22035849671, 460.39446880675314],
      [1819.1449000023126, 460.39446880675314],
      [1850.4121248830124, 467.34611800180335],
      [1868.651418913419, 471.69089874870974],
      [1881.6793497637123, 477.7736514610899],
      [1899.0500832641, 490.8080533685204],
      [1914.6836957044497, 473.4288408808279],
      [1929.4487476147806, 460.39446880675314],
      [1947.6880416451872, 450.83589149684775],
      [1969.4014585206714, 436.9325334400361],
      [1992.851757906199, 424.76711751534253],
      [2004.1428062464493, 417.81543848693667],
      [1996.940364067572, 1143.4450808942247],
      [1699.2872443846295, 1060.8454726559387],
    ],
  },
  {
    type: "stand",
    name: "Tribune Sud",
    url: userStore.isConnected
      ? "/Gradins/Gradin/sud"
      : "/utilisateur/connexion",
    coord: [
      [236.03013260397483, 418.7509251881477],
      [274.4660337456147, 392.7680015228414],
      [314.9796167110866, 363.66706421710785],
      [361.72603115995116, 331.4481489531007],
      [406.3948351143515, 306.50457506198813],
      [443.7919666734432, 287.79685004096154],
      [489.49954021039184, 274.285659797981],
      [521.7026811980068, 268.0498466100488],
      [551.8281403617896, 265.97114706166144],
      [593.3804929098098, 262.8532404676953],
      [631.8163940514496, 262.8532404676953],
      [1369.3709727609616, 260.7746122836154],
      [1469.5220191082808, 265.5437244109378],
      [1508.9968324912043, 278.0155648797247],
      [1565.0926724885774, 293.6053119424777],
      [1598.3344404000052, 310.23433741511695],
      [1630.5375100582523, 327.902819708411],
      [1655.4689786505587, 342.4532883612778],
      [1680.4003045841293, 360.12166360811074],
      [1694.0996089661571, 342.583189241975],
      [1702.4101222733818, 323.3558071749284],
      [1702.9295427293398, 304.12842510788187],
      [1700.3325117789177, 279.1847976935387],
      [1693.5803311689347, 257.8787339191816],
      [1682.15336645533, 242.28895117427493],
      [1706.0459228063523, 232.4154851409723],
      [1726.8529635668092, 221.80210252648172],
      [1741.9157288133845, 207.2516517146918],
      [1755.4202326920858, 194.77982908698178],
      [1765.8082851644072, 176.07210406595522],
      [1777.7545990046024, 152.68744778967198],
      [1781.3904708669406, 129.82246640048567],
      [1804.7636780913726, 132.94040867660544],
      [1829.6950753543113, 135.0190368606854],
      [1852.0295129961953, 131.38141969746863],
      [1876.4414898031757, 125.14553514522902],
      [1895.1400555827217, 115.79167263471567],
      [1911.2415904118452, 102.28048239173506],
      [1930.459576647349, 88.76939919521573],
      [1943.9640805260506, 104.87878546291188],
      [1956.9492352781615, 115.79167263471567],
      [1971.4925800687788, 122.5472320740522],
      [1986.0358535300284, 130.34210560542874],
      [2000.0598491940557, 134.49939765574226],
      [2000.9220776719005, -0.6982161201130452],
      [121.14531648882289, -0.21769214664249148],
      [88.94224683057567, 25.245610154797532],
      [58.81676983445081, 52.267883594297444],
      [24.016687058123324, 81.88844226389725],
      [-0.39534324588299796, 103.71412740212054],
      [-1.4427075601681736, 262.04382612711726],
      [236.03013260397483, 418.7509251881477],
    ],
  },
  {
    type: "stand",
    name: "Tribune Ouest",
    url: userStore.isConnected
      ? "/Gradins/Gradin/ouest"
      : "/utilisateur/connexion",
    coord: [
      [0.4557218135466883, 1148.188299638987],
      [286.87683149725086, 1063.956641415362],
      [254.683894260868, 638.6365670207451],
      [254.683894260868, 603.901872433861],
      [259.8915892676521, 571.7723008101203],
      [274.6466456576934, 542.2477328973677],
      [304.1566392440063, 515.3283475738364],
      [292.0054303573568, 496.95461971095887],
      [206.94702774769598, 443.1158192508573],
      [1.2446840956216647, 307.650408997677],
      [0.4557218135466883, 1148.188299638987],
    ],
  },
];

// Gradins  ##########################################################################################################################################################################################################################################
const NorthStand = [
  {
    type: "stand",
    name: "PrixCher",
    url: "../PrixCher",
    coord: [
      [197.24300002303798, 116.1750271862619],
      [865.2774427711763, 106.96035246067026],
      [931.3129821821058, 424.865857169274],
      [619.5636099348471, 435.6162895345668],
      [390.74260149499014, 440.2235946755164],
      [131.20733173008654, 437.15201495242155],
      [197.24300002303798, 116.1750271862619],
    ],
  },
  {
    type: "stand",
    name: "PrixPasCher",
    url: "../PrixPasCher",
    coord: [
      [71.3409777832273, 633.9786521287269],
      [125.84305712384845, 433.4803333811623],
      [931.6960061781832, 427.6405206158932],
      [982.3052023694979, 626.1922759493611],
      [723.4200192068453, 665.1239934822174],
      [608.5763316051754, 670.9637245655003],
      [540.4485486525774, 672.9103696615832],
      [448.9628133754436, 678.7501415858593],
      [384.7281586079139, 678.7501415858593],
      [277.6704006620311, 678.7501415858593],
      [149.2011728055591, 665.1239934822174],
      [69.21194389795662, 650.8896410092548],
      [71.3409777832273, 633.9786521287269],
    ],
  },
];

const EstStand = [
  {
    type: "stand",
    name: "PrixCher",
    url: "../PrixCher",
    coord: [
      [176.2836981541086, 519.054598490954],
      [649.6104307988468, 581.7034056617854],
      [734.8788253861468, 576.4826595602901],
      [766.2019985249719, 557.3399725371781],
      [807.9660833357045, 531.2363150532578],
      [835.8088065428594, 508.61310628796366],
      [845.4884817662023, 497.89978584667733],
      [848.9688281811249, 462.2247232047992],
      [849.8389421675968, 438.2963230777052],
      [847.6636937117387, 416.97828225616297],
      [846.4152385574275, 390.86777720478256],
      [844.0825819424379, 357.4316519258961],
      [807.5377153137485, 266.4545355451752],
      [767.1051094116137, 318.55255979132727],
      [745.3336911747847, 344.2128013859724],
      [728.2275861679349, 353.5437671839371],
      [708.0112505895615, 359.7644545541319],
      [691.6827195392457, 358.2092908687491],
      [667.5787099420388, 358.2092908687491],
      [663.3005712437969, 328.3010299429247],
      [217.3392274778982, 283.07923971076605],
      [176.2836981541086, 519.054598490954],
    ],
  },
  {
    type: "stand",
    name: "PrixPasCher",
    url: "../PrixPasCher",
    coord: [
      [129.90687999905307, 803.8515706700118],
      [169.68670075878504, 528.2237127953586],
      [649.8841346100088, 585.0541971112393],
      [689.6638361396125, 576.5296632152614],
      [715.3252597226889, 569.3370448904197],
      [738.7668567779774, 555.1294387158358],
      [765.0498270196294, 542.3425484455515],
      [789.2017971790409, 524.5830183707424],
      [814.0640808275111, 489.77436088643225],
      [831.8228718950082, 469.88368243324226],
      [843.188483870591, 447.8618854104441],
      [852.4230957639331, 432.943906379324],
      [851.002349555687, 497.58855173464656],
      [845.3195435678958, 530.2660906493484],
      [838.2160509869225, 569.3370448904197],
      [822.5883196167302, 606.9872385140328],
      [814.7744539316341, 626.1675292063005],
      [848.3872822325179, 660.4166984713595],
      [860.9840817964853, 695.0593057795965],
      [876.7301803608036, 726.5526482229377],
      [889.326979924771, 783.2407207852596],
      [892.4626851440032, 801.2505423310827],
      [129.90687999905307, 803.8515706700118],
    ],
  },
];

const SouthStand = [
  {
    type: "stand",
    name: "PrixPasCher",
    url: "../PrixPasCher",
    coord: [
      [104.82777916200078, 677.7304861903494],
      [175.94737474596255, 499.9244375117187],
      [206.65790264532072, 459.51399348445597],
      [248.68323536959306, 415.87064746393986],
      [314.9534932361298, 398.0900425960768],
      [279.39376326895126, -1.165332954076007],
      [53.10458490050641, -2.7817330799840647],
      [24.010322040817016, 69.95708651737618],
      [1.3813906390120678, 147.5451743200856],
      [-5.084076468477065, 435.26772028533577],
      [104.82777916200078, 677.7304861903494],
    ],
  },
  {
    type: "stand",
    name: "PrixCher",
    url: "../PrixCher",
    coord: [
      [318.6920824648939, 421.088332880612],
      [677.9478983264328, 417.27979907337374],
      [721.5780027057792, 1.3023276266873154],
      [279.9184339521871, 2.8686752154718533],
      [318.6920824648939, 421.088332880612],
    ],
  },
  {
    type: "stand",
    name: "PrixPasCher",
    url: "../PrixPasCher",
    coord: [
      [688.29094927702, 393.4628795562422],
      [737.1463528644142, 403.82652175911016],
      [774.1580335438689, 431.9566118647797],
      [799.3259913153839, 467.48929023133127],
      [815.6111258445154, 503.0219375351612],
      [840.7789593703143, 557.8015131187032],
      [847.2560128076475, 580.934776161769],
      [853.9181302394352, 526.8954873607648],
      [851.6974244288392, 479.51856216354827],
      [850.2169745960614, 443.2456436085414],
      [839.8537015208997, 408.45322096180587],
      [854.6583862172533, 381.0634487013957],
      [865.7322139998934, 352.797961098832],
      [876.9994412939236, 315.6150743869625],
      [884.8862545514512, 278.4321640348503],
      [889.393126557656, 248.0098193725882],
      [887.1397378330716, 218.71421595843213],
      [910.8006503908342, 218.71421595843213],
      [931.0812434691302, 204.06643789159682],
      [946.8551536552932, 188.29182401568454],
      [960.3756751168719, 154.48920832861876],
      [963.7558054822666, 135.3343707083883],
      [973.8961965784506, 172.51730470074318],
      [980.6563627522039, 193.92557753670036],
      [994.1768842137825, 213.08046243741632],
      [1000.9371449445719, 2.377437736822685],
      [719.2603394322928, 0.12390796012527971],
      [688.29094927702, 393.4628795562422],
    ],
  },
];

const WestStand = [
  {
    type: "stand",
    name: "PrixCher",
    url: "../PrixCher",
    coord: [
      [839.6821741164738, 482.92883322719194],
      [801.1279840049184, 242.69693902852543],
      [399.2753409262989, 316.8426115054865],
      [347.3754552631474, 318.3255075318841],
      [314.75272687869, 297.56471426029464],
      [296.9585905890613, 257.5260859690187],
      [270.26719948586924, 221.93614575693573],
      [202.0561985221546, 402.8515144191345],
      [231.71313382014657, 474.0313948433005],
      [270.26719948586924, 525.9333469095216],
      [332.5469876141514, 571.9036526446466],
      [379.9983080934376, 585.2498724459895],
      [408.17234684819687, 585.2498724459895],
      [405.2066782075642, 560.0403288697013],
      [839.6821741164738, 482.92883322719194],
    ],
  },
  {
    type: "stand",
    name: "PrixPasCher",
    url: "../PrixPasCher",
    coord: [
      [72.98403140543218, 785.9660750072215],
      [179.78904173433452, 447.4003020663923],
      [224.12317781939123, 509.8737759485066],
      [264.42681489940077, 564.2861700658598],
      [320.8521097569834, 600.5610712893711],
      [363.1711654608242, 618.698437336954],
      [397.4292231545708, 622.7290195014209],
      [397.08909551511084, 588.0103691005053],
      [414.3005327357872, 586.6863188336126],
      [414.3005327357872, 570.7982434287158],
      [838.9589837791252, 494.2538930170706],
      [882.6494910831271, 785.5360902859293],
      [72.98403140543218, 785.9660750072215],
    ],
  },
];
//Prestataires  #########################################################################################################""
const serviceLocation = ref([
  {
    id_zone: 1,
    name: "",
    type: "service",
    cote: "gauche",
    coord: [
      [236.429157771458, 881.2491765037553],
      [467.4825182979059, 878.5533441931505],
      [468.82980920844466, 865.7482043483886],
      [463.44073807459154, 853.617016796677],
      [474.21874157984473, 782.8517483655578],
      [501.16377347005334, 782.8517483655578],
      [492.40666007645723, 811.1578603656864],
      [507.2263975508738, 822.6150956243478],
      [517.3307556008575, 782.1778192109117],
      [538.8867626113639, 783.525723797012],
      [484.9967450850979, 612.3411934869489],
      [442.5583765193545, 613.0150763647871],
      [405.5090328333133, 613.6890980730493],
      [398.099164096105, 629.1900239516079],
      [391.42372743512857, 621.349927003532],
      [392.29166667011174, 634.8096196652978],
      [382.310350568584, 634.3754523801331],
      [383.1782600051247, 650.4402381920033],
      [379.27251854847907, 663.0315813769203],
      [367.55529417854257, 673.017816505213],
      [352.36631286867333, 676.4912740386859],
      [339.781119465311, 672.5836045004901],
      [328.063924893817, 663.0315813769203],
      [321.98832045049227, 656.084651403455],
      [324.5921381554418, 643.4932933120187],
      [325.8940917055803, 633.5070581837259],
      [317.2146397588636, 623.520852868472],
      [317.2146397588636, 617.008105086691],
      [236.49597802178232, 616.5739079884875],
      [235.1940542700863, 630.4677977484566],
      [230.8543431959492, 641.3223972601177],
      [220.0050580609958, 648.2693421401023],
      [210.89166629522998, 656.084651403455],
      [205.25003146939687, 658.6897445535598],
      [217.83520997353787, 681.2672781472111],
      [212.62755966441762, 722.0805830437505],
      [198.30650269031025, 713.8310915887135],
      [182.68353686372816, 777.2219151723849],
      [200.0423811602766, 784.603057150573],
      [192.2309131462069, 818.0352200689243],
      [236.429157771458, 881.2491765037553],
    ],
  },
  {
    id_zone: 2,
    name: nom_prestataire.value,
    type: "service",
    cote: "gauche",
    coord: [
      [938.017278081694, 813.3549615037266],
      [931.7177013365267, 615.680376582188],
      [835.5059301510914, 617.3993381881405],
      [830.9243947669588, 632.2964939845225],
      [826.3428987062721, 651.2045208520854],
      [834.9332234817825, 668.9665733156799],
      [822.906776660757, 674.1233007627047],
      [809.7349165011137, 673.5503529034286],
      [804.0080071018092, 685.0097428587383],
      [795.9903889956075, 681.5718983322497],
      [789.6907729269942, 687.3016129812586],
      [784.5366095204447, 674.6962879646887],
      [755.9021411708147, 675.8422230259489],
      [750.1752710949563, 665.5287681318995],
      [754.1840604863341, 648.3396635275809],
      [745.0210290415146, 642.6099882212802],
      [742.1575743418623, 628.8586888007421],
      [743.8756550263429, 615.107389380204],
      [611.5844450692157, 613.961493661652],
      [605.8575553316343, 640.3180787560517],
      [631.0558819740263, 644.9018583438004],
      [623.6109115519644, 697.0420806733239],
      [625.9016792440307, 711.9393151551221],
      [622.4655375367927, 728.5554325574565],
      [608.7209903695634, 715.9500878695326],
      [601.8487266168104, 780.122707027704],
      [615.5932737840396, 794.4469543075181],
      [616.1659607916254, 829.398091704077],
      [626.4743662516166, 882.6842884375687],
      [891.056786165871, 880.9653760100015],
      [894.4929082113861, 790.4361422503994],
      [924.2727505761877, 792.1550645136437],
      [925.4181245913594, 810.4900845078682],
      [938.017278081694, 813.3549615037266],
    ],
  },
  {
    id_zone: 3,
    name: "Presta 3",
    type: "service",
    cote: "gauche",
    coord: [
      [1071.5517918290284, 787.5010493297331],
      [1075.8779140680185, 618.6989793044224],
      [1100.598697448639, 616.843997505186],
      [1104.306823442943, 608.8057713463884],
      [1127.791571898138, 607.5691734226842],
      [1127.791571898138, 618.0806378857303],
      [1192.0656426365945, 616.843997505186],
      [1200.7179295506278, 632.9204073659414],
      [1209.3701740286078, 648.9967323130165],
      [1221.7305657189181, 652.0883544927972],
      [1235.3270347707075, 650.2334151504009],
      [1244.597317929427, 648.9967323130165],
      [1251.3955736733483, 628.5921448056165],
      [1256.3397133750511, 636.6302860507341],
      [1264.9919578530312, 613.7524177822454],
      [1413.9347392535483, 611.897393526169],
      [1415.7888128597137, 636.6302860507341],
      [1401.574347563238, 643.4318718289875],
      [1383.6517774904853, 700.9358830369154],
      [1383.033738809746, 721.9588544198476],
      [1401.574347563238, 702.7908436077316],
      [1408.990641987899, 776.9895636382669],
      [1388.5959171921882, 786.8827291394609],
      [1391.068029479093, 822.1271073554922],
      [1375.6175292571916, 882.7227195147806],
      [1116.6672151332532, 879.63110794921],
      [1113.5771066016623, 784.4094271499524],
      [1099.9806799859261, 785.0277473402246],
      [1100.598697448639, 814.0889236535348],
      [1091.328393071893, 813.4705822348427],
      [1090.7103756091801, 788.7376897102777],
      [1071.5517918290284, 787.5010493297331],
    ],
  },
  {
    id_zone: 4,
    name: "Prestataire 4",
    type: "service",
    cote: "gauche",
    coord: [
      [1478.9744570365215, 785.3943024419352],
      [1538.0815037502493, 633.4002246449551],
      [1531.73113840507, 614.3398973603635],
      [1555.5409547024042, 614.7024735053602],
      [1557.0063952467053, 623.4995244041004],
      [1571.1725664813653, 624.9657498912115],
      [1581.4307844586092, 617.6348238049403],
      [1642.491757488369, 615.6799236052202],
      [1642.491757488369, 629.8530003905117],
      [1649.8190608352268, 634.7402844480259],
      [1648.3535867491414, 645.0035608338773],
      [1660.0773123542544, 644.5148190048402],
      [1661.0543174395007, 660.1540541608147],
      [1671.3125018749604, 668.9511721759831],
      [1681.0822843931492, 672.8609725754231],
      [1691.340502370393, 673.3497144044602],
      [1702.575758974667, 666.996271976263],
      [1707.9490856928164, 659.1766376191688],
      [1710.3915313223636, 650.3795196040004],
      [1714.787953580619, 638.6500848474659],
      [1717.718834669221, 616.6573737050803],
      [1848.1450220772767, 612.7475733056401],
      [1846.6795815329756, 639.1388266765031],
      [1838.863809185279, 645.4922355464862],
      [1830.5594672113912, 644.5148190048402],
      [1810.5314667159587, 684.5903905528505],
      [1816.3933630602992, 721.7336789177089],
      [1834.4674204688076, 711.9591275817875],
      [1845.7025764477294, 778.4260028379817],
      [1830.5594672113912, 786.245620415969],
      [1832.5134102983154, 818.5016079442062],
      [1795.8768600222434, 882.5248327820898],
      [1553.0985090728568, 883.0135578320198],
      [1549.1906228990088, 868.3517308281378],
      [1556.5179262458662, 855.6448459717434],
      [1545.7712057259994, 783.801995166319],
      [1523.3007596010195, 785.268153537002],
      [1523.7892621436426, 802.3735974009805],
      [1511.5770675376907, 812.6368737868319],
      [1502.2957875621248, 799.4412471014004],
      [1502.2957875621248, 785.756895366039],
      [1478.9744570365215, 785.3943024419352],
    ],
  },
  {
    id_zone: 5,
    name: "Prestataire 5",
    type: "service",
    cote: "gauche",
    coord: [
      [355.37995618413174, 1087.6228543690916],
      [561.2874143370328, 1088.39132313416],
      [561.718115875269, 1057.165207663236],
      [565.5657609520026, 991.7418450679079],
      [642.5186624866781, 991.7418450679079],
      [593.3022795551874, 837.6503909040241],
      [467.1552030935154, 836.6669821416506],
      [465.4462187185154, 856.4464228663453],
      [470.3290312185154, 865.9698572893465],
      [469.5966093435154, 881.3538667418868],
      [312.61418746851535, 882.0864386205792],
      [337.1665078446539, 924.8230570576138],
      [333.75424796050294, 956.0827160618006],
      [317.64096671050294, 937.5242284682598],
      [305.18979483550294, 1010.0488444588073],
      [321.54721671050294, 1020.5490413867317],
      [320.6281752022592, 1048.3380107504024],
      [346.83852487493795, 1088.2077480621358],
      [355.37995618413174, 1087.6228543690916],
    ],
  },
  {
    id_zone: 6,
    name: "Prestataire 6",
    type: "service",
    cote: "gauche",
    coord: [
      [897.2330945740439, 841.6614699027841],
      [894.5475476990439, 883.9064482407124],
      [666.2760633240439, 882.1971138570968],
      [668.3344798463261, 900.1486800321088],
      [675.9712953294683, 900.4032926834905],
      [674.4439322328399, 923.0638186564678],
      [689.9721237152289, 923.3184313078496],
      [687.4265185541815, 953.6173368222799],
      [669.8618429429546, 942.9236054642456],
      [665.7888746852786, 1006.5767683096874],
      [674.1893717167351, 1025.418104511938],
      [688.3531975528813, 1086.805363405422],
      [686.108114483894, 1119.8469228271015],
      [701.1822436613797, 1109.5815839776476],
      [701.8236959668047, 1090.3340736349217],
      [913.182230604318, 1091.296449152058],
      [913.5029567570305, 1118.2429636318743],
      [927.6149074763789, 1094.8251593815578],
      [927.2941813236664, 1064.670726511287],
      [914.465135215168, 1082.3142776587858],
      [915.1065875205928, 1051.1974692713788],
      [949.7450120135388, 1051.8390529494698],
      [952.8491853872529, 843.1765913787954],
      [897.2330945740439, 841.6614699027841],
    ],
  },
  {
    id_zone: 7,
    name: "Prestataire 7",
    type: "service",
    cote: "gauche",
    coord: [
      [1115.3086360192272, 839.2040625731644],
      [1065.4715904990796, 839.2040625731644],
      [1057.3137250724892, 993.4323932269364],
      [1089.9093663153758, 992.8230041242347],
      [1090.9633210914403, 1089.4980738139811],
      [1306.0336268622627, 1088.8886847112797],
      [1306.6428911845596, 1118.4440561923107],
      [1318.8281776304984, 1103.8187177274706],
      [1313.4862601204295, 1086.111995108955],
      [1330.8153148475662, 1054.3567897944567],
      [1328.4900203378475, 1024.1217701516123],
      [1341.6666892262551, 1022.1836278668145],
      [1337.4036492917703, 944.6579364749056],
      [1324.6145294883154, 944.6579364749056],
      [1333.5281584422387, 934.967225050917],
      [1333.9157075271917, 899.3054070106389],
      [1338.56629654663, 881.8621264474593],
      [1114.9504745286486, 880.6992410765807],
      [1115.3086360192272, 839.2040625731644],
    ],
  },
  {
    id_zone: 8,
    name: "Prestataire 8",
    type: "service",
    cote: "gauche",
    coord: [
      [1554.4355986560506, 840.0166484032214],
      [1424.2237389507764, 841.061342476087],
      [1373.740531311031, 993.2384457568521],
      [1457.9952640615027, 992.5419830416083],
      [1463.0504479986555, 1087.9856106061402],
      [1480.6648260838213, 1088.8245623013115],
      [1481.5036059926385, 1106.1628973348522],
      [1491.2893715955083, 1105.323945639681],
      [1489.8914050808125, 1087.9856106061402],
      [1659.6045399648688, 1088.5449117362543],
      [1659.8841332678078, 1100.0105849035958],
      [1667.1535591442253, 1100.0105849035958],
      [1667.1535591442253, 1088.2652611711972],
      [1679.1760711706083, 1088.8245623013115],
      [1704.8986550410089, 1051.9106877137733],
      [1720.8354733085396, 1039.8857134163177],
      [1724.4701862467484, 1028.4200402489762],
      [1717.200760370331, 1013.0392591708353],
      [1710.2109277968525, 1015.8357648214063],
      [1703.500688526313, 1021.9880772526627],
      [1698.747602376348, 1013.8782108660066],
      [1690.0802099852344, 939.770811125873],
      [1697.3496358616521, 931.940595304274],
      [1694.5537028322608, 906.7720444491343],
      [1713.2864541291829, 881.6034935939947],
      [1553.0952017959407, 881.8447392431481],
      [1549.1889517959407, 866.2165391643769],
      [1556.7573111709407, 854.0070078528369],
      [1554.4355986560506, 840.0166484032214],
    ],
  },
  {
    id_zone: 9,
    name: "Prestataire 9",
    type: "service",
    cote: "gauche",
    coord: [
      [558.5921502241332, 1088.4957999996634],
      [532.138729742942, 1090.0341045505393],
      [527.5247610543622, 1100.494575496496],
      [520.7576069777784, 1089.418782730189],
      [424.78705825531745, 1089.1111218200138],
      [431.5542123319012, 1098.6486100354448],
      [428.1706352936093, 1129.7223619631395],
      [419.2502958290216, 1135.8755801666434],
      [415.5591208781577, 1189.1009176269522],
      [430.32382068161326, 1189.4085785371274],
      [427.8630373810373, 1220.482330464822],
      [449.2203536506079, 1248.6566043262583],
      [439.99241627344816, 1263.1166671044923],
      [451.06594112603983, 1269.5775462181714],
      [453.5267244266158, 1249.5795870567838],
      [629.7803283303663, 1251.4255525178348],
      [632.9195516676575, 1147.4204728469085],
      [691.9783508814796, 1147.7281337570837],
      [656.9134538121534, 1029.6501123209482],
      [561.3214637630601, 1027.3604417341144],
      [558.5921502241332, 1088.4957999996634],
    ],
  },
  {
    id_zone: 10,
    name: "Prestataire 10",
    type: "service",
    cote: "gauche",
    coord: [
      [951.2630334703656, 1029.1025783920554],
      [914.9967021485379, 1028.5880569899375],
      [914.9967021485379, 1091.1024073472656],
      [743.9533664817618, 1088.529800336676],
      [736.0197307995675, 1220.1116208705093],
      [742.449931388544, 1245.8376909764056],
      [930.9834126573362, 1248.4102979869951],
      [933.5554928929268, 1147.5641031718815],
      [960.3051273430693, 1145.2487568623508],
      [951.2630334703656, 1029.1025783920554],
    ],
  },
  {
    id_zone: 11,
    name: "Prestataire 11",
    type: "service",
    cote: "gauche",
    coord: [
      [1089.8633147499086, 1029.320969487104],
      [1056.215540028868, 1027.9747828489067],
      [1050.8318960735014, 1142.4006470956824],
      [1077.750115850334, 1143.7468337338798],
      [1077.536746926614, 1250.4686801367632],
      [1245.7885164876543, 1246.9499097482887],
      [1237.9630798824971, 1257.4103806942444],
      [1242.5770485710768, 1278.0236616759826],
      [1250.8821922105208, 1278.0236616759826],
      [1250.2669963853768, 1261.7176334366973],
      [1256.1113567242446, 1256.1797370535437],
      [1258.5721400248203, 1263.8712598079237],
      [1265.0316961888323, 1251.5648234009159],
      [1275.49002521628, 1233.7204906107545],
      [1277.335612691712, 1253.718449772142],
      [1288.4091375443036, 1253.1031279517917],
      [1283.1799730305797, 1220.4910714732212],
      [1294.8686937083153, 1198.0318250304317],
      [1296.0990853586034, 1168.496377653613],
      [1287.1787458940155, 1160.497193989058],
      [1276.4128189539958, 1133.730694803816],
      [1275.49002521628, 1109.1178219898004],
      [1287.1787458940155, 1088.196880097887],
      [1092.1616693233736, 1088.5045410080622],
      [1089.8633147499086, 1029.320969487104],
    ],
  },
  {
    id_zone: 12,
    name: "Prestataire 12",
    type: "service",
    cote: "gauche",
    coord: [
      [1462.0849199483368, 1051.6753016676641],
      [1439.1146252197138, 1060.7011941951155],
      [1438.2942575508346, 1082.0351219872725],
      [1414.5035951533323, 1067.6757475117822],
      [1403.8388154579002, 1030.341373875507],
      [1357.077858331775, 1030.751641717664],
      [1321.8020485699612, 1148.0882445745287],
      [1388.6620135836315, 1147.267708890215],
      [1393.9944034313476, 1247.7833302186482],
      [1574.0651067503734, 1249.4244015872757],
      [1597.445585313436, 1212.0900279510004],
      [1590.8826439624008, 1186.2431538951178],
      [1599.4965044856344, 1177.2172613676664],
      [1591.7030116312803, 1129.6261916774695],
      [1583.4993349424863, 1136.6007449941364],
      [1580.6280481014085, 1088.1891396196256],
      [1461.674736113897, 1089.4199431460963],
      [1457.5728977695, 1075.8811043549194],
      [1465.3663906238544, 1066.8552118274683],
      [1462.0849199483368, 1051.6753016676641],
    ],
  },
  {
    id_zone: 13,
    name: "Prestataire 13",
    type: "service",
    cote: "gauche",
    coord: [
      [511.7771491766284, 1246.63763591478],
      [511.5025017266179, 1256.5269690857253],
      [503.26307822630076, 1258.7245986792686],
      [501.3405460762268, 1310.9183015259248],
      [508.4813797765016, 1307.3471534364169],
      [513.4250338766918, 1279.602079817931],
      [508.4813797765016, 1341.9598195347257],
      [528.5306436272732, 1365.8590413645102],
      [541.7137212277805, 1364.2108191693528],
      [541.43907377777, 1376.8471893322273],
      [555.1714462782984, 1377.671300429806],
      [555.9953886283301, 1361.7384858766163],
      [679.0374462330653, 1361.1890784782306],
      [684.5303952332766, 1253.5052283946031],
      [699.6360049838579, 1252.6811172970245],
      [703.7557167340165, 1230.4301176623974],
      [683.706452883245, 1191.6968960761947],
      [673.8191446828644, 1190.8727849786158],
      [656.7910027822091, 1212.8490809140499],
      [648.2769318318815, 1230.4301176623974],
      [643.3332777316912, 1218.8925622962943],
      [627.1290781810676, 1217.244340101137],
      [628.2276679811099, 1248.2858581099376],
      [511.7771491766284, 1246.63763591478],
    ],
  },
  {
    id_zone: 15,
    name: "Prestataire 15",
    type: "service",
    cote: "gauche",
    coord: [
      [1076.6453257130363, 1173.5770677593334],
      [1049.2967504005744, 1175.4635626861307],
      [1046.1532359968433, 1253.1242705059497],
      [1063.442565217365, 1252.8098546848169],
      [1062.4995108962457, 1287.0811791882998],
      [1059.3559964925144, 1277.019872912048],
      [1047.0962903179625, 1277.019872912048],
      [1045.83888455647, 1334.2435523582303],
      [1059.6703479328876, 1333.9291365370975],
      [1063.7569166577382, 1310.9767815943978],
      [1061.8708080154993, 1364.113055365853],
      [1093.9346549335582, 1364.7418870081187],
      [1123.1693388882588, 1375.4320249266364],
      [1165.249353661014, 1360.3627586809166],
      [1231.1517541026878, 1362.2695788011179],
      [1232.4091598641803, 1388.680507776279],
      [1242.1540545157472, 1374.8462116464327],
      [1234.295268506419, 1359.754252232055],
      [1244.040163157986, 1333.0289074357609],
      [1257.8716265344035, 1332.714491614628],
      [1256.614220772911, 1284.6088709812989],
      [1241.525351635001, 1285.2377026235647],
      [1241.1956558760849, 1275.1466865328816],
      [1228.4711097941165, 1270.1556464806638],
      [1241.1956558760849, 1248.1950702509062],
      [1092.4931173495518, 1247.4464142430736],
      [1077.5230631354711, 1248.1950702509062],
      [1076.6453257130363, 1173.5770677593334],
    ],
  },
  {
    id_zone: 16,
    name: "Prestataire 16",
    type: "service",
    cote: "gauche",
    coord: [
      [1391.8506561706479, 1219.9714961864918],
      [1364.2627655456479, 1215.5760649143374],
      [1350.8350311706479, 1187.9825241502572],
      [1317.8760467956479, 1188.4709054027187],
      [1321.2940155456479, 1213.622539904491],
      [1315.6787811706479, 1222.6575930750307],
      [1317.3877655456479, 1266.3677151703437],
      [1330.0830780456479, 1270.5189558162674],
      [1334.9658905456479, 1364.0439656626636],
      [1339.3604217956479, 1368.439396934818],
      [1339.8487030456479, 1385.288550144743],
      [1344.4873749206479, 1374.7883532168187],
      [1343.9990936706479, 1362.0904406528173],
      [1467.7783905456479, 1360.3811062692016],
      [1465.5811249206479, 1373.5674000856648],
      [1474.8584686706479, 1375.2767344692804],
      [1479.2529999206479, 1364.2881562888945],
      [1504.3994842956479, 1336.694615524814],
      [1504.1553436706479, 1314.717459164042],
      [1516.8506561706479, 1315.4500310427345],
      [1512.4561249206479, 1260.7513307670354],
      [1498.7842499206479, 1270.0305745638057],
      [1497.0752655456479, 1247.3208463243413],
      [1393.0713592956479, 1249.030180707957],
      [1391.8506561706479, 1219.9714961864918],
    ],
  },
  {
    id_zone: 14,
    name: "Prestataire 14",
    type: "service",
    cote: "gauche",
    coord: [
      [770.7138256604105, 1246.4649902448489],
      [767.2958569104105, 1335.594568819091],
      [770.2255444104105, 1346.5831469994769],
      [764.8544506604105, 1354.3972470388624],
      [768.3571812413593, 1386.1096086528644],
      [779.738304006523, 1361.1890749286736],
      [948.6095580085457, 1362.7273794795494],
      [947.6867642708298, 1325.808070258526],
      [953.5311246096976, 1334.4225757434315],
      [964.9122473748613, 1334.4225757434315],
      [966.7578348502932, 1271.3520891575163],
      [953.5311246096976, 1271.6597500676917],
      [952.6083308719817, 1295.964961971532],
      [946.6220412968378, 1296.4533432239932],
      [946.8661819218378, 1254.9409367647572],
      [950.7724319218378, 1239.3127366859862],
      [963.9560256718378, 1239.3127366859862],
      [962.9794631718378, 1177.5325082495938],
      [934.6591506718378, 1177.7766988758246],
      [934.1708694218378, 1249.080361735218],
      [770.7138256604105, 1246.4649902448489],
    ],
  },
  {
    id_zone: 17,
    name: "Prestataire 17",
    type: "service",
    cote: "droite",
    coord: [
      [150.1851648875062, 612.5567138118583],
      [191.3135718798144, 610.927014043831],
      [195.79289610577587, 621.5200159101029],
      [283.34344560551057, 619.0754818000305],
      [285.3795048962021, 639.8540683615518],
      [289.8588601899628, 659.0029862389832],
      [300.8535679325772, 667.1514539951827],
      [309.4050107399217, 673.2627892703636],
      [327.72954435614525, 668.7811226792725],
      [336.68822387586744, 659.0029862389832],
      [343.20360739252044, 646.3728363497239],
      [350.940638910708, 646.7802846046839],
      [353.7911094905564, 627.2239495562301],
      [355.8271687812479, 618.6680646290081],
      [467.8104297692808, 611.3344312148533],
      [462.5166631863632, 630.8907662633073],
      [520.7480023950592, 784.8968037470845],
      [499.98017277576645, 782.0448369240208],
      [497.1296711281188, 803.2308561985334],
      [481.6556391595429, 795.4898056133563],
      [482.0628448041213, 780.007719984971],
      [457.2229276712448, 781.6374197529984],
      [442.1560702794481, 852.5290721357685],
      [449.48589615305724, 867.1963311930933],
      [445.4137775716742, 882.6784168214787],
      [205.97320809313297, 883.0858417634855],
      [167.28808156999435, 821.1574837079754],
      [171.7674057959558, 788.9710376251842],
      [153.8500778243107, 779.6003028139486],
      [166.47365474693783, 716.4496777034024],
      [181.13327542635682, 724.5981454596018],
      [186.01982083079636, 683.8558066786043],
      [167.6952872145728, 645.1505848366564],
      [158.73662322875023, 640.6689337875343],
      [151.8140185336192, 636.1872516544745],
      [150.1851648875062, 612.5567138118583],
    ],
  },
  {
    id_zone: 18,
    name: "Prestataire 18",
    type: "service",
    cote: "droite",
    coord: [
      [581.5535091729033, 610.8681879882264],
      [581.8320456199615, 637.891756782723],
      [598.2656959963958, 644.0208136227118],
      [615.8134921610631, 722.5841785716603],
      [599.1013053375705, 702.525447095333],
      [594.9232586316973, 779.9744380733745],
      [608.8500809846079, 791.396771275172],
      [605.8279019024884, 825.1904768069666],
      [611.955703737769, 828.255005226961],
      [625.6039896436213, 882.5807363086807],
      [634.2386195024258, 882.5807363086807],
      [883.2502031724648, 882.302142815954],
      [884.0858125136394, 920.7480448122478],
      [899.9623899959573, 885.9238582214019],
      [894.1131246077349, 862.5220048323534],
      [887.428249878338, 882.8593298014075],
      [887.1497134312797, 790.6448837088474],
      [898.8482442077245, 790.6448837088474],
      [899.4053171018409, 823.5189158506059],
      [910.8253114312274, 809.5892412142675],
      [911.9394572194603, 789.809103230667],
      [929.7657898311857, 789.5305097379403],
      [923.1565445052694, 615.3686743539822],
      [807.7750130163638, 616.4405489255757],
      [788.8424397379986, 650.3832436927032],
      [755.9783502736663, 652.1697013120258],
      [739.1890871777574, 637.8780403574458],
      [732.759156630388, 613.2249252107952],
      [581.5535091729033, 610.8681879882264],
    ],
  },
  {
    id_zone: 19,
    name: "Prestataire 19",
    type: "service",
    cote: "droite",
    coord: [
      [1067.0784072556935, 615.3375688589288],
      [1058.1624939538312, 797.3405214638731],
      [1103.1473292495907, 793.6923553760234],
      [1103.9578668224872, 886.9232665099593],
      [1177.027481304859, 882.5735557381216],
      [1176.7058192558902, 894.1557611093361],
      [1200.8304729285605, 892.5471214744452],
      [1200.5088108795917, 880.9649161032307],
      [1372.9196691269435, 883.217011592078],
      [1377.4229378125087, 909.5987016042889],
      [1390.2894197712662, 888.686386350707],
      [1383.8561787918875, 854.9049540179981],
      [1389.6460956733285, 832.0622712025471],
      [1380.961220351167, 827.5580802248526],
      [1381.926206498074, 793.1331920381872],
      [1395.4360125547694, 778.0119794702126],
      [1394.1493643588938, 715.9184895634236],
      [1376.7796137145708, 731.3614300583763],
      [1375.4929655186943, 693.9885831567304],
      [1390.2894197712658, 644.4424824020905],
      [1385.1428269877626, 613.8783293391632],
      [1256.4780074001865, 614.5217851931195],
      [1256.4780074001865, 646.6945778909377],
      [1244.254849539367, 657.955055335174],
      [1251.0097525677147, 666.9634372905632],
      [1234.2833260213297, 679.5108264427122],
      [1217.2352374259758, 670.5024444873231],
      [1211.445320544535, 687.2322966901886],
      [1194.397231949181, 685.6236570552977],
      [1186.9990048228956, 674.6849075380395],
      [1163.8393372971318, 668.8938048524323],
      [1168.6642680316659, 651.5204967956104],
      [1161.2660409053804, 614.8435131200978],
      [1067.0784072556935, 615.3375688589288],
    ],
  },
  {
    id_zone: 20,
    name: "Prestataire 20",
    type: "service",
    cote: "droite",
    coord: [
      [1513.3925666883354, 613.190676557165],
      [1515.4031590699624, 633.300718167993],
      [1458.3023354317575, 782.517226920336],
      [1484.4400363929076, 782.9194277525527],
      [1491.6781689667646, 824.7483143030747],
      [1504.1438417328513, 811.4756868399284],
      [1502.1332493512245, 781.712825255903],
      [1528.2709503123747, 783.7238294169858],
      [1536.7154383152076, 856.9243808803994],
      [1527.8688318360491, 866.1750000213802],
      [1530.2815426940015, 883.0674349744758],
      [1768.3356806786296, 883.8718366389088],
      [1808.547528311168, 815.0954943298773],
      [1801.7115142136363, 786.5392352425017],
      [1819.4047271719533, 776.0820136048711],
      [1804.1242250715886, 708.9144746247059],
      [1788.4416044948987, 718.9694954301199],
      [1782.0077088736925, 674.3252030540818],
      [1795.2776185924304, 655.0195631076871],
      [1764.7166143917011, 637.3227264901585],
      [1760.2933111521218, 615.2016807182479],
      [1683.8908006502986, 615.6038815504644],
      [1672.2293648368623, 632.4963165035598],
      [1676.6526680764416, 642.9535381411904],
      [1675.4463126474657, 656.2261656043368],
      [1652.5255594969185, 678.3472113762475],
      [1620.3560813908878, 665.074583913101],
      [1615.530659674983, 650.595353953305],
      [1619.1497259619116, 637.724927322375],
      [1593.8162619534123, 615.2016807182479],
      [1513.3925666883354, 613.190676557165],
    ],
  },
  {
    id_zone: 21,
    name: "Prestataire 21",
    type: "service",
    cote: "droite",
    coord: [
      [284.3710912358909, 881.3640465253576],
      [306.59846661089085, 911.737243460466],
      [303.7809119858909, 934.595422597197],
      [310.98132936089087, 941.1710631707771],
      [306.28540498589086, 964.3423680491071],
      [294.7021248608909, 963.089865082711],
      [286.87558423589087, 1020.3918757953379],
      [300.3372341108909, 1022.8968817281303],
      [293.1368167358909, 1050.7650727304463],
      [322.25154786089087, 1091.1582933967243],
      [538.5771307358909, 1088.3401617223328],
      [537.3248842358909, 1068.6132400015924],
      [544.2122399858908, 991.5843075682249],
      [627.1735706108909, 992.8368105346211],
      [574.8922792358909, 839.0920714094852],
      [447.7892594858909, 836.5870654766927],
      [444.9717048608909, 856.0008614558342],
      [449.3545676108909, 868.2127653781973],
      [447.1631362358909, 882.9296752333529],
      [284.3710912358909, 881.3640465253576],
    ],
  },
  {
    id_zone: 22,
    name: "Prestataire 22",
    type: "service",
    cote: "droite",
    coord: [
      [661.6485815828293, 881.4967082964886],
      [670.5748414283483, 936.617947182232],
      [680.6653960363265, 951.3687012502478],
      [662.4247780911353, 950.2041680343518],
      [658.5437955496052, 1023.1815828971669],
      [674.930984118705, 1027.0923868586167],
      [673.6829348411464, 1056.3027211522306],
      [684.9153783391736, 1089.5076310757402],
      [687.6610867498024, 1116.9703385312746],
      [694.4005528486186, 1106.484577502798],
      [696.3974316927124, 1088.2593261913978],
      [905.8201004670398, 1088.0096652145294],
      [909.3146384442039, 1068.5361090187866],
      [910.5626877217624, 990.6418842358166],
      [943.0119689382851, 992.1398500970276],
      [934.9696794207205, 837.7367454727143],
      [887.7963727376566, 837.7367454727143],
      [886.2048787732808, 869.6779543560676],
      [895.9308047236773, 863.9409771512355],
      [900.1703109071834, 883.8956804723904],
      [885.7061133399271, 920.3130140334978],
      [882.4641380231283, 880.4036073911882],
      [661.6485815828293, 881.4967082964886],
    ],
  },
  {
    id_zone: 23,
    name: "Prestataire 23",
    type: "service",
    cote: "droite",
    coord: [
      [1106.4614692566583, 841.3139598759319],
      [1063.1704504468469, 839.8706303749749],
      [1048.0185938634127, 1053.1225641413678],
      [1087.341269282325, 1052.4008993908894],
      [1084.094442871589, 1081.628321785268],
      [1073.2716881691363, 1065.7516972747414],
      [1071.8286542088092, 1098.5874434215125],
      [1086.9805107922432, 1118.0723916844318],
      [1088.0627862624885, 1087.7624721643351],
      [1302.7140878611376, 1087.7624721643351],
      [1297.6634689999928, 1108.6907499282113],
      [1309.929257662773, 1119.5157211853887],
      [1313.8976010536724, 1090.28829879101],
      [1311.0115331330182, 1079.4633275338326],
      [1327.6064236767793, 1027.5034654993815],
      [1325.8026312263705, 1017.4001589926827],
      [1335.9038689486597, 1006.5751877355054],
      [1330.8532500875149, 939.4603659410063],
      [1314.6191180338355, 954.2544933258152],
      [1314.2583595437538, 925.0270709314366],
      [1326.524148206534, 920.6970824285656],
      [1333.739318008169, 881.7271859027273],
      [1200.9801936580802, 881.3663535274881],
      [1200.6194351679985, 894.7171514113401],
      [1176.0878578424386, 894.3563190361008],
      [1176.0878578424386, 882.8096830284451],
      [1105.7399522764947, 884.253012529402],
      [1106.4614692566583, 841.3139598759319],
    ],
  },
  {
    id_zone: 24,
    name: "Prestataire 24",
    type: "service",
    cote: "droite",
    coord: [
      [1533.0864718828093, 837.2995131601178],
      [1406.7569729503512, 836.9465651940543],
      [1354.5313700397257, 994.0084100922852],
      [1435.339904273058, 993.3025141601584],
      [1440.9859153985312, 1089.6573088954774],
      [1467.804468244528, 1090.7161527936678],
      [1469.2159710258961, 1100.5986958434441],
      [1481.2137446675263, 1098.4810080470636],
      [1480.5079932768422, 1087.8925690651604],
      [1658.0044680338997, 1090.7161527936678],
      [1658.3573437292416, 1103.0693316058882],
      [1642.4779374388488, 1102.7163836398247],
      [1664.3562305500568, 1117.8931461805528],
      [1662.9447277686884, 1083.3042455063355],
      [1657.032011800056, 1083.5155995252892],
      [1681.201933675056, 1047.1311962169],
      [1677.539824300056, 1019.2934648265889],
      [1695.362089925056, 1010.7467929085109],
      [1683.887480550056, 935.7802706556554],
      [1665.332793050056, 951.4084707344266],
      [1663.623808675056, 923.3265487178846],
      [1688.770293050056, 881.569951632418],
      [1531.4298474852103, 881.5328370406864],
      [1528.8182302840364, 865.2794463608657],
      [1536.6530818875576, 851.3479686353049],
      [1533.0864718828093, 837.2995131601178],
    ],
  },
  {
    id_zone: 25,
    name: "Prestataire 25",
    type: "service",
    cote: "droite",
    coord: [
      [595.9319079321108, 1030.9762214964721],
      [594.3541405036158, 1045.8102727907253],
      [581.100894104258, 1060.013087859691],
      [582.994215018452, 1074.2159029286568],
      [573.2120569617831, 1065.6942138872773],
      [571.3187360475891, 1081.7907376321052],
      [556.8032757054353, 1084.946918758542],
      [555.2255082769404, 1058.750615409116],
      [538.5011735348936, 1058.1193791838289],
      [539.7633874776895, 1074.8471391539442],
      [537.5545130777966, 1088.4187179976225],
      [524.6168201641378, 1089.04995422291],
      [518.3057504501579, 1104.1996236298066],
      [509.785806336285, 1102.6215330665882],
      [510.416913307683, 1088.4187179976225],
      [408.4891827377035, 1086.6522663986586],
      [406.7359979646757, 1117.7150428885684],
      [416.5037417001166, 1125.9817495350765],
      [417.0046516352674, 1132.4949123474769],
      [409.74145757558057, 1129.989849727323],
      [401.9773535807429, 1178.5880645583106],
      [410.7432774458822, 1188.107302514896],
      [406.48554299710025, 1215.4124850745745],
      [430.6812724750264, 1248.8918951875826],
      [596.482461009947, 1251.3969578077365],
      [608.754754421142, 1243.8817699472745],
      [612.2611239671977, 1143.9297714031297],
      [677.1289605692285, 1145.9338214992529],
      [641.2260478697501, 1030.0557038104344],
      [595.9319079321108, 1030.9762214964721],
    ],
  },
  {
    id_zone: 26,
    name: "Prestataire 26",
    type: "service",
    cote: "droite",
    coord: [
      [714.7052596446629, 1087.27060496777],
      [724.5483928469666, 1110.652834141085],
      [721.7800116338187, 1141.1112642484293],
      [709.1684972183671, 1166.9547807031456],
      [707.9381055680791, 1198.3361935410155],
      [718.7040325080989, 1221.7184227143305],
      [719.0116304206708, 1248.7925828097477],
      [714.5492794936547, 1243.9969488148336],
      [713.8168576186547, 1253.2761926116038],
      [724.0707638686547, 1253.7645738640654],
      [724.5590451186547, 1235.6944675229863],
      [742.1371701186547, 1266.7066770542979],
      [748.9731076186547, 1264.5089614182207],
      [748.9731076186547, 1277.451064608453],
      [757.0297482436547, 1277.9394458609147],
      [757.0297482436547, 1266.9508676805285],
      [770.4574826186547, 1269.1485833166057],
      [771.1899044936547, 1251.811048854219],
      [758.9828732436547, 1247.4156175820647],
      [789.0121701186547, 1247.9039988345262],
      [790.4770138686547, 1259.136767641143],
      [801.9516232436547, 1248.148189460757],
      [908.1527951186547, 1248.148189460757],
      [910.3500607436547, 1262.5554364083741],
      [921.3363888686547, 1261.3344832772202],
      [924.7543576186547, 1142.1694576765901],
      [948.1918576186547, 1140.948504545436],
      [941.1167239177626, 1026.9246384019866],
      [909.4484627399631, 1026.9246384019866],
      [908.191785709098, 1088.263037349216],
      [881.5502326547587, 1089.268584872941],
      [882.0529034671047, 1099.575446991123],
      [863.7054188164748, 1087.7602635873534],
      [714.7052596446629, 1087.27060496777],
    ],
  },
  {
    id_zone: 27,
    name: "Prestataire 27",
    type: "service",
    cote: "droite",
    coord: [
      [1082.926909375865, 1029.10301796032],
      [1048.3151767390416, 1029.4636306821342],
      [1040.7438602247364, 1147.7446034371728],
      [1065.6210430574533, 1149.5476670462435],
      [1066.3421208207205, 1247.273714657876],
      [1246.04289717313, 1249.365228452469],
      [1244.8125055228422, 1267.2095612426303],
      [1258.0392157634378, 1275.5164058173607],
      [1270.0355343537453, 1250.5958720931699],
      [1262.9607823645897, 1234.2898438538843],
      [1255.4615555810117, 1230.711619098103],
      [1264.8606436603725, 1210.6965590349123],
      [1259.2460612516506, 1103.4529925360719],
      [1268.7675456266506, 1088.0689830835315],
      [1116.4132330935809, 1088.6123007569072],
      [1106.1593268435809, 1106.1940258455247],
      [1098.5909674685809, 1105.7056445930632],
      [1095.4171393435809, 1089.5890632618305],
      [1085.8956549685809, 1090.5658257667535],
      [1085.8956549685809, 1118.159366530834],
      [1071.9796393435809, 1095.9380195438312],
      [1071.9796393435809, 1067.6119069010583],
      [1079.3038580935809, 1067.6119069010583],
      [1080.0362799685809, 1081.0423913437523],
      [1086.1397955935809, 1078.1121038289828],
      [1085.4073737185809, 1039.5299848845166],
      [1082.926909375865, 1029.10301796032],
    ],
  },
  {
    id_zone: 28,
    name: "Prestataire 28",
    type: "service",
    cote: "droite",
    coord: [
      [1392.1048095479796, 1029.0257516363013],
      [1345.1717749020886, 1030.3118515477531],
      [1309.4898102055552, 1148.3115184234605],
      [1366.7095373765728, 1146.0608435784197],
      [1373.3736122593123, 1250.5721558616108],
      [1392.5092839807883, 1248.020210421142],
      [1393.0195685600277, 1267.4149957687034],
      [1402.2046909863363, 1265.6286339603755],
      [1401.694406407097, 1246.2338486128142],
      [1508.4022815195244, 1247.9752950698728],
      [1508.1581408945244, 1254.5684419781044],
      [1504.7401721445244, 1270.929213935568],
      [1526.7128283945244, 1265.3128295322597],
      [1525.9804065195244, 1248.952057574796],
      [1520.8534533945244, 1245.0450075551032],
      [1545.7557971445244, 1246.2659606862574],
      [1547.7089221445244, 1270.6850233093373],
      [1559.4276721445244, 1262.8709232699516],
      [1552.5917346445244, 1246.2659606862574],
      [1575.2968127695244, 1215.4979417811765],
      [1571.6347033945244, 1187.4160197646347],
      [1584.8182971445244, 1187.1718291384038],
      [1580.4237658945244, 1130.0312226003966],
      [1568.9491565195244, 1130.763794479089],
      [1573.9886971353862, 1118.9613141389952],
      [1570.0824471353862, 1096.4957765257616],
      [1575.9418221353862, 1087.4607233552222],
      [1479.9945565103862, 1088.681676486376],
      [1477.3090096353862, 1100.1586359192236],
      [1466.0785408853862, 1099.4260640405314],
      [1464.3695565103862, 1088.4374858601452],
      [1440.6879158853862, 1088.681676486376],
      [1439.9554940103862, 1056.6927044501413],
      [1425.7953377603862, 1065.2393763682194],
      [1403.8226815103862, 1063.7742326108346],
      [1377.4554940103862, 1044.971554391063],
      [1377.6996346353862, 1035.6923105942926],
      [1392.1048095479796, 1029.0257516363013],
    ],
  },
  {
    id_zone: 29,
    name: "Prestataire 29",
    type: "service",
    cote: "droite",
    coord: [
      [604.012496663684, 1252.0993437001844],
      [502.3082795536581, 1248.0904748668281],
      [501.55677056023427, 1270.139253450288],
      [486.2760876939496, 1259.114864158558],
      [484.522566709294, 1316.2412450338857],
      [493.2901716325721, 1319.247896658903],
      [496.04570460845946, 1339.2922408256848],
      [518.8414774089825, 1359.3365849924664],
      [521.3465073870619, 1367.1037683570944],
      [527.6090823322606, 1358.835476388297],
      [653.8625932274651, 1363.3454538258227],
      [654.3635992230811, 1375.6226146279766],
      [662.8807011485512, 1376.1237232321462],
      [664.1332161375909, 1361.842128013314],
      [670.8967970784055, 1265.629276012762],
      [682.169431979763, 1263.6248415960838],
      [687.4299949337299, 1244.3321603355564],
      [683.1714439709948, 1216.5206328041468],
      [677.6603780192199, 1210.5073295541124],
      [646.3475032932267, 1186.9552251581438],
      [646.5980062910347, 1199.4829402623825],
      [632.8203414115977, 1200.7357117728063],
      [623.8022334905118, 1216.5206328041468],
      [616.2871435562733, 1233.5583253459113],
      [608.2710476264191, 1224.5383704708595],
      [608.772053622035, 1247.8399205647434],
      [604.012496663684, 1252.0993437001844],
    ],
  },
  {
    id_zone: 30,
    name: "Prestataire 30",
    type: "service",
    cote: "droite",
    coord: [
      [948.4965636122938, 1174.5002352533052],
      [924.9172002058638, 1173.4748355759605],
      [921.9365415229763, 1250.2868910098364],
      [757.1416196479762, 1247.3566034950668],
      [763.0009946479762, 1262.008041068915],
      [756.8974790229762, 1273.973381754224],
      [756.8974790229762, 1285.4503411870717],
      [744.4463071479762, 1283.741006803456],
      [742.9814633979762, 1335.021038311924],
      [757.1416196479762, 1335.2652289381547],
      [766.086662298984, 1364.5012855345444],
      [757.541740423984, 1376.9550074723152],
      [765.110099798984, 1387.211013774009],
      [769.2905197462486, 1381.5975722737837],
      [769.7788009962486, 1361.8181315490888],
      [939.7006759962487, 1364.7484190638584],
      [938.2358322462487, 1251.932349745229],
      [953.6166916212487, 1252.4207309976907],
      [948.4965636122938, 1174.5002352533052],
    ],
  },
  {
    id_zone: 31,
    name: "Prestataire 31",
    type: "service",
    cote: "droite",
    coord: [
      [1066.1031549739916, 1176.5284355188705],
      [1035.9031027684655, 1177.7613431649304],
      [1032.513300990294, 1251.1193481054931],
      [1041.7582149307614, 1252.660482663068],
      [1041.1418873347302, 1273.311685734571],
      [1032.8214647883096, 1273.311685734571],
      [1033.7459561823564, 1336.1899756836249],
      [1054.0847668513843, 1335.8817487721099],
      [1054.0847668513843, 1363.9303977199722],
      [1223.8830195579649, 1361.1563555163375],
      [1229.4299679222454, 1387.047416083595],
      [1234.66875248851, 1374.101885799966],
      [1234.66875248851, 1352.5260019939183],
      [1228.8136403262142, 1343.2791946484692],
      [1232.8197697004166, 1334.0323873030202],
      [1229.4299679222454, 1247.1123982557986],
      [1066.7194825700226, 1248.6535328133734],
      [1066.1031549739916, 1176.5284355188705],
    ],
  },
  {
    id_zone: 32,
    name: "Prestataire 32",
    type: "service",
    cote: "droite",
    coord: [
      [1332.8430892354709, 1193.1347425389713],
      [1315.6176061314393, 1193.1347425389713],
      [1293.778154338828, 1242.9758099873532],
      [1302.6984938034157, 1255.282246394361],
      [1317.1555956942993, 1254.6669245740104],
      [1322.6923581205951, 1362.0405822251537],
      [1338.6874495743386, 1362.348243135329],
      [1343.6090161754905, 1410.6510060328346],
      [1357.758520153802, 1404.1901269191555],
      [1349.1457786017863, 1361.1175994946282],
      [1446.3467189745354, 1362.9635649556794],
      [1446.6543168871074, 1377.1159668237383],
      [1460.188625040275, 1374.3470186321615],
      [1460.496222952847, 1362.0405822251537],
      [1472.3919853368438, 1361.6650097551353],
      [1491.3027384996947, 1340.2939386162031],
      [1487.3732313489725, 1282.8131265873508],
      [1495.2322456504169, 1305.9037091972316],
      [1497.442593422698, 1257.266099018972],
      [1493.2674920750558, 1246.9490301932806],
      [1372.4351471903474, 1247.6859636808301],
      [1371.3650545205314, 1216.3906095971643],
      [1353.191083948441, 1222.531721993409],
      [1338.946620527073, 1214.9167426220654],
      [1324.7021571057048, 1201.8975843420262],
      [1332.8430892354709, 1193.1347425389713],
    ],
  },
]);
const nomType = ref("");


async function fetchPresta() {
  try {
    const res = await prestataireStore.GetPrestataires();
    prestataires.value = res.data;
    nomType.value = res.nom_type_prestataire;
    prestataires.value.forEach((presta) => {
      if (presta.id_zone && presta.waitingforadmin === false) {
        const zone = serviceLocation.value.find(
          (z) => z.id_zone === presta.id_zone
        );
        if (zone) {
          zone.name = presta.nom_prestataire;
          zone.id_prestataire = presta.id_prestataire;
          zone.type_prestataire = presta.nom_type_prestataire;
        }
      }
    });
  } catch (err) {
    console.error("Erreur lors de la rÃ©cupÃ©ration des prestataires:", err);
  }
}

onMounted(() => {
  fetchPresta();
  // Recharger les donnÃ©es quand la fenÃªtre redevient active
  window.addEventListener("focus", fetchPresta);
});

// Recharger les donnÃ©es quand on revient sur la page
onActivated(() => {
  fetchPresta();
});

// Nettoyer le listener quand on quitte la page
onBeforeUnmount(() => {
  window.removeEventListener("focus", fetchPresta);
});

//Pour crÃ©er les zones sur les maps
function features(location) {
  return location.map((location) => {
    const feature = new Feature({
      geometry: new Polygon([location.coord]),
      id: location.id_zone,
      cote: location.cote,
      name: location.name,
      type: location.type,
      url: location.url,
      image: location.image,
      terrainId: location.terrainId,
    });
    return feature;
  });
}

onMounted(() => {
  //CrÃ©ation d'une nouvelle projection
  addProjection(projection);

  //CrÃ©ation d'une "couche" en gros ce qu'on l'on va afficher (une image fixe)
  const mapLayer = new ImageLayer({
    source: new ImageStatic({
      url: "/MapTout.png",
      projection: projection,
      imageExtent: tailleMap,
    }),
  });

  map = new Map({
    target: "map",
    layers: [mapLayer],
    controls: [], //EnlÃ¨ve le bouton plus et moins
    interactions: [], // EnlÃ¨ve le zoom, dezoom, drag, mouvement...
    view: new View({
      projection,
      center: [1000, 800],
      minZoom: 2,
      maxZoom: 2,
      zoom: 2,
    }),
  });

  //On ajoute les tableaux des coordonnÃ©es
  const featuresList = features(generalMap);

  //Style hover et normal //Stroke c'est pour le contour
  hoverStyle = new Style({
    stroke: new Stroke({ color: "#ffffff", width: 2 }),
    fill: new Fill({ color: "rgba(0,22,122,0.3)" }),
  });
  defaultStyle = new Style({
    stroke: new Stroke({ color: "#00167a", width: 2 }),
    fill: new Fill({ color: "rgba(0,22,122,0.5)" }),
  });
  standStyle = new Style({
    stroke: new Stroke({ color: "#000000", width: 2 }),
    fill: new Fill({ color: "rgba(0,0,0,0.3)" }),
  });
  standHoverStyle = new Style({
    stroke: new Stroke({ color: "#000000", width: 2 }),
    fill: new Fill({ color: "rgba(0,0,0,0.5)" }),
  });
  providerStyle = new Style({
    stroke: new Stroke({ color: "#1F5E00", width: 2 }),
    fill: new Fill({ color: "rgba(31,94,0,0.6)" }),
  });
  providerHoverStyle = new Style({
    stroke: new Stroke({ color: "#2E8B00", width: 2 }),
    fill: new Fill({ color: "rgba(68,172,16,0.7)" }),
  });
  generalStyle = new Style({
    stroke: new Stroke({ color: "#CC3300", width: 2 }),
    fill: new Fill({ color: "rgba(204,51,0,0.4)" }),
  });
  generalHoverStyle = new Style({
    stroke: new Stroke({ color: "#FF6600", width: 2 }),
    fill: new Fill({ color: "rgba(255,102,0,0.6)" }),
  });
  restorationStyle = new Style({
    stroke: new Stroke({ color: "#6d071a", width: 2 }),
    fill: new Fill({ color: "rgba(124,21,41,0.7)" }),
  });
  restorationHoverStyle = new Style({
    stroke: new Stroke({ color: "#8e273b", width: 2 }),
    fill: new Fill({ color: "rgba(124,21,41,0.6)" }),
  });
  animationlStyle = new Style({
    stroke: new Stroke({ color: "#5a189a", width: 2 }),
    fill: new Fill({ color: "rgba(90, 24, 154, 0.7)" }),
  });
  animationlHoverStyle = new Style({
    stroke: new Stroke({ color: "#9d4edd", width: 2 }),
    fill: new Fill({ color: "rgba(157, 78, 221, 0.6)" }),
  });

  featuresList.forEach((f) => {
    if (f.get("type") === "stand") f.setStyle(standStyle);
    else if (f.get("type") === "service") f.setStyle(providerStyle);
    else if (f.get("type") === "generalZone") f.setStyle(generalStyle);
    else f.setStyle(defaultStyle);
  });

  const sourceVecteur = new VectorSource({ features: featuresList });
  coucheVecteur = new VectorLayer({ source: sourceVecteur });
  map.addLayer(coucheVecteur);

  // Hover name
  lastFeature = null;
  label = document.getElementById("hoverName");

  // Masquer le label lors du scroll (il rÃ©apparaÃ®tra au prochain mouvement de souris) ca rÃ¨gle a moitiÃ© mais toujours un probleme
  // quand je scroll ca s'enleve alors que je suis encore sur le poly
  window.addEventListener("wheel", () => {
    if (label) {
      label.style.display = "none";
    }
  });

  map.on("pointermove", (event) => {
    const searchFeature = map.forEachFeatureAtPixel(event.pixel, (f) => f);
    const mapContainer = document.getElementById("map");

    // Remet le style normal si on quitte une feature
    if (searchFeature !== lastFeature) {
      if (lastFeature) {
        const lastZone = serviceLocation.value.find(
          (z) => z.name === lastFeature.get("name")
        );
        if (lastFeature.get("type") === "stand") {
          lastFeature.setStyle(standStyle);
        } else if (lastFeature.get("type") === "service") {
          if (lastZone && lastZone.type_prestataire === "Restauration") {
            lastFeature.setStyle(restorationStyle);
          } else if (lastZone && lastZone.type_prestataire === "Animation") {
            lastFeature.setStyle(animationlStyle);
          } else {
            lastFeature.setStyle(providerStyle);
          }
        } else if (lastFeature.get("type") === "generalZone") {
          lastFeature.setStyle(generalStyle);
        } else {
          lastFeature.setStyle(defaultStyle);
        }
      }
    }

    if (searchFeature) {
      const name = searchFeature.get("name");
      const type = searchFeature.get("type");
      //C'est pour rÃ©cupÃ©rer la position et les dimensions de la carte ( pour afficher le label au bon endroit )
      const bounds = mapContainer.getBoundingClientRect();

      label.style.display = "block";

      //Pour centrer sur le curseur
      const mouseX = event.originalEvent.clientX;
      const mouseY = event.originalEvent.clientY;

      label.style.display = "block";

      // Centrer horizontalement + dÃ©caler verticalement de 15px sous la souris
      const x = mouseX - label.offsetWidth / 2;
      const y = mouseY - 52;

      label.style.left = x + "px";
      label.style.top = y + "px";

      if (type === "service") {
        const zone = serviceLocation.value.find((z) => z.name === name);
        if (zone && zone.type_prestataire) {
          label.innerHTML = `<div class="contentContener"><span class="title">${name}</span><br/><span class="subtitle">${zone.type_prestataire}</span></div>`;
        } else {
          label.innerText = name;
        }
      } else {
        label.innerText = name;
      }

      label.style.fontSize = "16px";
      label.style.padding = "2px 6px";

      // Styles selon le type du backgroud lab
      if (searchFeature.get("type") === "stand") {
        searchFeature.setStyle(standHoverStyle);
        label.style.backgroundColor = "#000000";
      } else if (searchFeature.get("type") === "service") {
        const zone = serviceLocation.value.find((z) => z.name === name);
        if (zone && zone.type_prestataire) {
          if (zone.type_prestataire === "Restauration") {
            searchFeature.setStyle(restorationHoverStyle);
            label.style.backgroundColor = "#800020";
          } else if (zone.type_prestataire === "Animation") {
            searchFeature.setStyle(animationlHoverStyle);
            label.style.backgroundColor = "#5a189a";
          } else if (zone.type_prestataire === "Boutique") {
            searchFeature.setStyle(providerHoverStyle);
            label.style.backgroundColor = "#1F5E00";
          } else {
            searchFeature.setStyle(providerHoverStyle);
            label.style.backgroundColor = "#1F5E00";
          }
        } else {
          searchFeature.setStyle(providerHoverStyle);
          label.style.backgroundColor = "#1F5E00";
        }
      } else if (searchFeature.get("type") === "generalZone") {
        searchFeature.setStyle(generalHoverStyle);
        label.style.backgroundColor = "#FF6600";
      } else {
        searchFeature.setStyle(hoverStyle);
        label.style.backgroundColor = "#00167a";
      }

      mapContainer.style.cursor = "pointer";
    } else {
      label.style.display = "none";
      mapContainer.style.cursor = "default";
    }

    lastFeature = searchFeature;
  });

  // Gestion du clic
  map.on("click", (event) => {
    const clickedFeature = map.forEachFeatureAtPixel(
      event.pixel,
      (featureFound) => featureFound
    );
    if (!clickedFeature) return;

    const type = clickedFeature.get("type");

    if (type === "court") {
      const terrainId = clickedFeature.get("terrainId");
      if (terrainId) {
        router.push({
          name: "Terrain",
          params: {
            id: terrainId,
            lang: route.params.lang,
          },
        });
      }
      return;
    }

    if (type === "stand") {
      const standName = clickedFeature.get("name"); // ex: "Tribune Nord"
      let zone = "";

      // DÃ©termine la zone en fonction du stand
      switch (standName) {
        case "Tribune Nord":
          zone = "nord";
          break;
        case "Tribune Est":
          zone = "est";
          break;
        case "Tribune Sud":
          zone = "sud";
          break;
        case "Tribune Ouest":
          zone = "ouest";
          break;
        default:
          zone = "nord";
      }

      router.push({
        name: "Gradin",
        params: {
          lang: route.params.lang,
          zone: zone,
        },
      });
      return;
    }

    if (type === "service") {
      const zoneName = clickedFeature.get("name");
      const zone = serviceLocation.value.find((z) => z.name === zoneName);

      if (zone && zone.id_prestataire) {
        router.push({
          name: "ShowPrestataire",
          params: {
            lang: route.params.lang,
            id: zone.id_prestataire,
          },
        });
      }
      return;
    }

    if (type === "generalZone") {
      const image = clickedFeature.get("image");
      const cote = clickedFeature.get("cote");
      currentMapType.value =
        image === "/mapTerrain.png" ? "terrains" : "prestataires";
      changeMap(currentMapType.value, image, cote);
      return;
    }
  });
});

function changeMap(type, image = null, cote) {
  if (!map) return;
  currentMapType.value = type;
  currentMapCote.value = cote;

  // Supprime la couche de zones
  if (coucheVecteur) {
    map.removeLayer(coucheVecteur);
    coucheVecteur = null;
  }

  // Supprime la couche d'image actuelle
  const oldImageLayer = map.getLayers().item(0);
  if (oldImageLayer) map.removeLayer(oldImageLayer);

  // DÃ©finit l'image Ã  afficher
  let imageUrl = "/MapTout.png";

  if (image) {
    imageUrl = image;
  } else {
    if (type === "prestataires") {
      if (cote === "droite") imageUrl = "/MapPrestaDroite.png";
      else if (cote === "gauche") imageUrl = "/MapPrestaGauche.png";
    } else if (type === "terrains") {
      imageUrl = "/mapTerrain.png";
    }
  }

  // Ajoute la nouvelle image
  const newImageLayer = new ImageLayer({
    source: new ImageStatic({
      url: imageUrl,
      projection: projection,
      imageExtent: tailleMap,
    }),
  });
  map.getLayers().insertAt(0, newImageLayer);

  // DÃ©termine quelle liste de zones afficher
  let zone = [];

  if (type === "generalZone") {
    if (!image || image === "/MapTout.png") {
      zone = generalMap;
    } else if (image === "/mapTerrain.png") {
      zone = landLocations;
    }
  } else if (type === "terrains") {
    zone = landLocations;
  } else if (type === "prestataires") {
    // Filtrer pour n'afficher que les zones affectÃ©es Ã  un prestataire validÃ©
    const prestasWithZone = prestataires.value.filter(
      (p) => p.id_zone && p.waitingforadmin === false
    );
    const zoneIds = prestasWithZone.map((p) => p.id_zone);
    zone = serviceLocation.value.filter(
      (z) => z.cote === cote && zoneIds.includes(z.id_zone)
    );
  } else if (type === "stand") {
    if (image === "/GradinNord.png") zone = NorthStand;
    else if (image === "/GradinEst.png") zone = EstStand;
    else if (image === "/GradinSud.png") zone = SouthStand;
    else if (image === "/GradinOuest.png") zone = WestStand;
  }

  // Si aucune zone Ã  afficher, on s'arrÃªte ici
  if (zone.length === 0) return;

  // CrÃ©e les polygones pour chaque zone
  const featuresList = features(zone);
  featuresList.forEach((f) => {
    if (f.get("type") === "stand") {
      f.setStyle(standStyle);
    } else if (f.get("type") === "service") {
      const zoneName = f.get("name");
      const serviceZone = serviceLocation.value.find(
        (z) => z.name === zoneName
      );
      if (serviceZone && serviceZone.type_prestataire) {
        if (serviceZone.type_prestataire === "Restauration") {
          f.setStyle(restorationStyle);
        } else if (serviceZone.type_prestataire === "Animation") {
          f.setStyle(animationlStyle);
        } else {
          f.setStyle(providerStyle);
        }
      } else {
        f.setStyle(providerStyle);
      }
    } else if (f.get("type") === "generalZone") {
      f.setStyle(generalStyle);
    } else {
      f.setStyle(defaultStyle);
    }
  });

  // CrÃ©e la couche vectorielle contenant les polygones
  const sourceVecteur = new VectorSource({ features: featuresList });
  coucheVecteur = new VectorLayer({ source: sourceVecteur });
  map.addLayer(coucheVecteur);
}

function goBack() {
  switch (currentMapType.value) {
    case "stand":
      changeMap("terrains", "/mapTerrain.png", null);
      break;
    case "terrains":
      changeMap("generalZone", "/MapTout.png", null);
      break;
    case "prestataires":
      changeMap("generalZone", "/MapTout.png", null);
      break;
    default:
      break;
  }
}
</script>

<style>
body {
  font-family: "Inter", "Segoe UI", sans-serif;
  background: #f9fafb;
  color: #222;
}

body::-webkit-scrollbar {
  display: none;
}

.button {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 20px 0;
}

.SwitchButton {
  z-index: 1000;
  position: absolute;
  padding: 8px 16px;
  margin-top: 5px;
  margin-left: 5px;
  border: none;
  border-radius: 8px;
  background: #e0e7ff;
  color: #00167a;
  font-weight: 600;
  font-size: 14px;
  transition: all 0.25s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.SwitchButton:hover {
  background: #00167a;
  color: #fff;
  transform: translateY(-2px);
}
.hoverName {
  display: none;
  z-index: 999999;
  pointer-events: none;
  position: fixed;
  padding: 6px 10px;
  background: #fff;
  border-radius: 6px;
  font-size: 13px;
  color: white;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.contentContener {
  text-align: center;
}

.title {
  font-weight: bold;
}

.subtitle {
  font-size: 13px;
  opacity: 0.9;
}

.mapContainer {
  display: flex;
  justify-content: center;
  align-items: center;
}
.map {
  z-index: 1;
  margin: 0 auto;
  /* border: 2px solid #00167a; */
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  width: 100%;
  height: 100%;
}
</style>
